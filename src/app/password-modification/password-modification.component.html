<div class="password-modification-container">
    <div class="form-container">
        <h2>Change Password</h2>
        <p>Password must be 6-20 characters (Letters, Numbers, or Symbols)</p>

        <form #passwordForm="ngForm" (ngSubmit)="onSubmit(passwordForm)">
            <!-- Old Password Field -->
            <div class="form-group">
                <label for="oldPassword">Current Password</label>
                <div class="password-input-container">
                    <input
                            #oldPasswordField="ngModel"
                            [(ngModel)]="oldPassword"
                            [type]="showOldPassword ? 'text' : 'password'"
                            id="oldPassword"
                            maxlength="20"
                            minlength="6"
                            name="oldPassword"
                            required
                    />
                    <span (click)="toggleOldPasswordVisibility()" class="eye-icon">
            <i [class]="showOldPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </span>
                </div>
                <p *ngIf="oldPasswordField.errors?.['required'] && oldPasswordField.touched" class="error">
                    Current password is required.
                </p>
                <p *ngIf="oldPasswordField.errors?.['minlength'] && oldPasswordField.touched" class="error">
                    Password must be at least 6 characters.
                </p>
            </div>

            <!-- New Password Field -->
            <div class="form-group">
                <label for="newPassword">New Password</label>
                <div class="password-input-container">
                    <input
                            #newPasswordField="ngModel"
                            [(ngModel)]="newPassword"
                            [type]="showNewPassword ? 'text' : 'password'"
                            id="newPassword"
                            maxlength="20"
                            minlength="6"
                            name="newPassword"
                            required
                    />
                    <span (click)="toggleNewPasswordVisibility()" class="eye-icon">
            <i [class]="showNewPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </span>
                </div>
                <p *ngIf="newPasswordField.errors?.['required'] && newPasswordField.touched" class="error">
                    New password is required.
                </p>
                <p *ngIf="newPasswordField.errors?.['minlength'] && newPasswordField.touched" class="error">
                    Password must be at least 6 characters.
                </p>
                <p *ngIf="newPasswordField.errors?.['maxlength'] && newPasswordField.touched" class="error">
                    Password cannot exceed 20 characters.
                </p>
            </div>

            <!-- Confirm Password Field -->
            <div class="form-group">
                <label for="confirmPassword">Confirm New Password</label>
                <div class="password-input-container">
                    <input
                            #confirmPasswordField="ngModel"
                            [(ngModel)]="confirmPassword"
                            [type]="showConfirmPassword ? 'text' : 'password'"
                            id="confirmPassword"
                            maxlength="20"
                            minlength="6"
                            name="confirmPassword"
                            required
                    />
                    <span (click)="toggleConfirmPasswordVisibility()" class="eye-icon">
            <i [class]="showConfirmPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </span>
                </div>
                <p *ngIf="confirmPasswordField.errors?.['required'] && confirmPasswordField.touched" class="error">
                    Confirm password is required.
                </p>
                <p *ngIf="confirmPasswordField.errors?.['minlength'] && confirmPasswordField.touched" class="error">
                    Password must be at least 6 characters.
                </p>
            </div>

            <!-- Password Mismatch Error -->
            <p *ngIf="passwordMismatch" class="error">
                New passwords do not match.
            </p>

            <!-- Success Message -->
            <p *ngIf="successMessage" class="success">
                {{ successMessage }}
            </p>

            <!-- Error Message -->
            <p *ngIf="errorMessage" class="error">
                {{ errorMessage }}
            </p>

            <!-- Submit Button -->
            <button
                    [disabled]="passwordForm.invalid || passwordMismatch"
                    class="update-button"
                    type="submit"
            >
                Update Password
            </button>
        </form>

        <p class="disclaimer">
            By continuing, you confirm that you understand the security implications of changing your password.
        </p>
    </div>
</div>
